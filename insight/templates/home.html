{% extends "main.html" %}
{% load static %}

{% block content %}

{% include "navbar.html" %}

<div class="centered-content">
    <h1>A Picture is Worth a Thousand Words</h1>
    <p>Upload your image and discover the narrative it holds.</p>


    <form action="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="upload-container">
            <input type="file" id="imageUpload" name="image" accept="image/*" required onchange="previewImage(event)">
            <label for="imageUpload" class="upload-label">Choose an Image</label>
        </div>
        <img id="imagePreview" src="#" alt="Image Preview" style="max-width: 100%; max-height: 300px; margin-top: 20px; display: none;">
        <button type="submit" class="upload-button">Upload</button>
    </form>
</div>


<script>
document.getElementById('imageUpload').addEventListener('change', function() {
    var fileName = this.files[0].name;
    var nextSibling = this.nextElementSibling;
    nextSibling.innerText = fileName;
});

function previewImage(event) {
    var reader = new FileReader();
    reader.onload = function(){
        var output = document.getElementById('imagePreview');
        output.src = reader.result;
        output.style.display = 'block';
    };
    reader.readAsDataURL(event.target.files[0]);
}
</script>

{% endblock %}
